<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="__STATIC__/layui/css/layui.css">
	<link rel="stylesheet" href="__STATIC__/admin/css/admin.css"/>
	<link rel="icon" href="/favicon.ico">
	<title>管理后台</title>
	<style>
		.layui-form-label {width:120px}
		.layui-input-block {margin-left:160px}
	</style>
</head>
<body class="layui-view-body">
<div class="layui-content">
	<div class="layui-row" style="padding:15px">
		<div class="layui-card">
			<div class="layui-card-header">网站配置</div>
			<div class="layui-card-body" style="padding: 15px;">
				<form class="layui-form" action="" id="dataForm">
					<div class="layui-row layui-col-space10 layui-form-item">
						<div class="layui-col-lg6">
							<label class="layui-form-label">网站LOGO</label>
							<div class="layui-input-block">
								<div class="layui-upload-drag uploadDiv">
									<i class="layui-icon"></i>
									<p>点击上传，或将文件拖拽到此处</p>
									<input type="hidden" name="logo" required lay-verify="required" lay-reqtext="请上传LOGO" value="{$config.logo}">
								</div>
								<div class="layui-inline imgDiv122">
									<img class="showPath" src="{$config.logoShow|default='__STATIC__/admin/images/default.png'}" style="width:100%;height:100%">
								</div>
							</div>
						</div>
						<div class="layui-col-lg6">
							<label class="layui-form-label">网站favicon</label>
							<div class="layui-input-block">
								<div class="layui-upload-drag uploadDiv">
									<i class="layui-icon"></i>
									<p>点击上传，或将文件拖拽到此处</p>
									<input type="hidden" name="favicon" required lay-verify="required" lay-reqtext="请上传favicon" value="{$config.favicon}">
								</div>
								<div class="layui-inline imgDiv122">
									<img class="showPath" data-id="img2" src="{$config.faviconShow|default='__STATIC__/admin/images/default.png'}" style="width:100%;height:100%">
								</div>
							</div>
						</div>
					</div>
					<div class="layui-row layui-col-space10 layui-form-item">
						<div class="layui-col-lg6">
							<label class="layui-form-label">网站标题中文</label>
							<div class="layui-input-block">
								<input type="text" name="site_name_cn" value="{$config.site_name_cn}" lay-verify="required" autocomplete="off" class="layui-input layui-form-danger">
							</div>
						</div>
						<div class="layui-col-lg6">
							<label class="layui-form-label">网站标题英文</label>
							<div class="layui-input-block">
								<input type="text" name="site_name_en" value="{$config.site_name_en}" lay-verify="required" autocomplete="off" class="layui-input layui-form-danger">
							</div>
						</div>
					</div>
					<div class="layui-row layui-col-space10 layui-form-item">
						<div class="layui-col-lg6">
							<label class="layui-form-label">关键字中文</label>
							<div class="layui-input-block">
								<input type="text" name="keyword_cn" value="{$config.keyword_cn}" lay-verify="required" autocomplete="off" class="layui-input layui-form-danger">
							</div>
						</div>
						<div class="layui-col-lg6">
							<label class="layui-form-label">关键字英文</label>
							<div class="layui-input-block">
								<input type="text" name="keyword_en" value="{$config.keyword_en}" lay-verify="required" autocomplete="off" class="layui-input layui-form-danger">
							</div>
						</div>
					</div>

					<div class="layui-row layui-col-space10 layui-form-item">
						<div class="layui-col-lg6">
							<label class="layui-form-label">网站描述中文</label>
							<div class="layui-input-block">
								<textarea name="description_cn" class="layui-textarea">{$config.description_cn}</textarea>
							</div>
						</div>
						<div class="layui-col-lg6">
							<label class="layui-form-label">网站描述英文</label>
							<div class="layui-input-block">
								<textarea name="description_en" class="layui-textarea">{$config.description_en}</textarea>
							</div>
						</div>
					</div>

					<div class="layui-row layui-col-space10 layui-form-item">
						<div class="layui-col-lg6">
							<label class="layui-form-label">联系地址中文</label>
							<div class="layui-input-block">
								<textarea name="address_cn" class="layui-textarea">{$config.address_cn}</textarea>
							</div>
						</div>
						<div class="layui-col-lg6">
							<label class="layui-form-label">联系地址英文</label>
							<div class="layui-input-block">
								<textarea name="address_en" class="layui-textarea">{$config.address_en}</textarea>
							</div>
						</div>
					</div>
					<div class="layui-row layui-col-space10 layui-form-item">
						<div class="layui-col-lg6">
							<label class="layui-form-label">联系电话</label>
							<div class="layui-input-block">
								<input type="text" name="mobile" value="{$config.mobile}" lay-verify="required" autocomplete="off" class="layui-input layui-form-danger">
							</div>
						</div>
						<div class="layui-col-lg6">
							<label class="layui-form-label">联系邮箱</label>
							<div class="layui-input-block">
								<input type="text" name="email" value="{$config.email}" lay-verify="required" autocomplete="off" class="layui-input layui-form-danger">
							</div>
						</div>
					</div>

					<div class="layui-form-item">
						<div class="layui-input-block">
							<div class="layui-footer">
								<input type="hidden" name="id" value="{$config.id|default=0}">
								<button class="layui-btn" lay-submit="" lay-filter="dataForm">立即提交</button>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
<script src="__STATIC__/layui/layui.all.js"></script>
<script type="text/javascript">
	layui.use(['layer', 'upload', 'form'], function () {
		var layer = layui.layer, $ = layui.$, upload = layui.upload, form = layui.form;
		upload.render({
			elem: '.uploadDiv'
			, exts: 'jpg|png|gif|bmp|jpeg|ico' //只允许上传压缩文件
			, accept: 'images' //普通文件
			, url: '/common/upload/image?t=' + new Date().getTime() //改成您自己的上传接口
			, done: function (res) {
				if (res.code == 1) {
					var _this = $(this.item);
					_this.find('input').val(res.data.path);
					_this.siblings('.imgDiv').find('.showPath').attr("src", res.data.pathShow);
				} else {
					layer.msg('上传失败，请重试');
				}
			}
		});

		//监听提交
		form.on('submit(dataForm)', function () {
			$.post('/admin/config/edit?t=' + new Date().getTime(), $('#dataForm').serialize(), function (res) {
				if (res.code == 1) {
					layer.closeAll();
					layer.msg('发布成功');
					table.reload('versionTable');
				} else {
					layer.msg('发布失败'.res.msg);
				}
			}, 'json');
			return false;
		});
	});
</script>
</body>
</html>